## 問題2: 契約,売上,収益認識

現時点ではどれか1つの製品を1つのみ購入の契約ができる。

契約(contract)が成立した場合、

- ワードプロセッサは契約日(signed_on または signedDate)に直ちに売上(revenue)を収益認識(revenue recognition)する。
- スプレッドシートは（30日間の返品を受け付けるので ←ここは実装不要です）契約日に売上の2/3、30日後に1/3を収益認識する。
- データベースは（120日間のサポートを行うので ←ここは実装不要です）契約日に売上の1/3、60日後に1/3、120日後にまた1/3を収益認識する。

このとき、特定の日付における売上高(粗収益: gross revenue)を計算したい。

例:
本日まで売上高ゼロのところから本日 MS Excel、 MS SQL Server がひとつずつ、 5日後に MS Word と MS Excel がひとつずつ売れる契約が成立したときの
本日、30日後、60日後の売上高

## 問題2: 契約,売上,収益認識

現時点ではどれか1つの製品を1つのみ購入の契約ができる。

契約(contract)が成立した場合、

- ワードプロセッサは契約日(signed_on または signedDate)に直ちに収益認識（売上高に加算）される
- スプレッドシートは（30日間の返品を受け付けるので ←ここは実装不要です）
  - 契約日に売上の2/3を売上高に加算する
  - 30日後に1/3を収益認識（売上高に加算）する。
- データベースは（120日間のサポートを行うので ←ここは実装不要です）
  - 契約日に売上の1/3を売上高に加算する
  - 60日後に1/3を売上高に加算する
  - 120日後にまた1/3を収益認識(売上高に加算）する。

このとき、特定の日付における売上高(粗収益: gross revenue)を計算したい。

例:
本日まで売上高ゼロのところから本日 MS Excel、 MS SQL Server がひとつずつ、 5日後に MS Word と MS Excel がひとつずつ売れる契約が成立したときの
本日、30日後、60日後の売上高

## TODO

- [x] 1つの契約ではどれか1つの製品を1つのみ契約できる。
  - [x] 契約(contract)クラスをつくる
  - [x] 契約(contract)には必ず1つの製品(product)が紐づく
- [ ] 特定の日付における売上高(粗収益: gross revenue)を計算できる。
  - [x] 特定の日付を契約へ設定できる
  - [ ] 売上の計算ができる
    - [x] 契約をリスト化できる
      - [x] 契約履歴をクラス化する
    - [ ] 特定日付や日付範囲などで売上の合算ができる。
      - [x] 契約に紐づく製品の金額の合計を算出できる。
      - [x] 特定の日付の売上の合算ができる
        - [ ] 指定日のスプレッドシートの売上が取得できる
          - [ ] 指定日を渡すと契約日からの経過日数を返す
            - [ ] 契約日が2020/1/1だった場合に指定日が2020/1/2の場合は1を返す
          - [x] x 日後の price のうち収益認識した金額が計算できる
            - [x] 指定日が契約日(signed_on)から-1日後だった場合は price は 0 が取得できる
            - [x] 指定日が契約日(signed_on)から 0日後だった場合は price の 2/3 が取得できる
              - [ ] memo: 端数が出た場合
            - [x] 指定日が契約日(signed_on)から30日後だった場合は price の 3/3 が取得できる
              - [ ] memo: 端数が出た場合
        - [ ] 指定日のデータベースの売上が取得できる
          - 同上
        - [ ] 指定日のワードの売上が取得できる
          - 同上
          

              
- [x] product の type と price は必須
